{% extends 'base.html' %}

{% block title %}Task List{% endblock %}

{% block content %}

<h2>{{request.user.username}}</h2>
<h6>you have to {{count}} task for done</h6>
<hr>
<div
    style="display: flex; color: wheat; width: 400px; justify-content: space-between; margin-bottom: 50px; align-items: center;">
    <h6><a href="{% url 'todo:task-create'%}">Add Task</a></h6>
    <form method="get">
        <input type="text" placeholder="search" name="search-area" value="{{search_input}}">
        <input type="submit" value="serch">
    </form>
    
</div>
{% if tasks %}
{% for task in tasks %}
<div style="display: flex; justify-content: space-between; width: 300px;">
    {% if task.complete %}
    <h6 style="text-decoration: line-through;"><a style="text-decoration: none; color: black;" href="{% url 'todo:task-detail' task.id %}">{{task.title}}</a></h6>
    {% else %}
    <h6><a style="text-decoration: none; color: black;" href="{% url 'todo:task-detail' task.id %}">{{task.title}}</a></h6>
    {% endif %}
    <form method="POST" action="{% url 'todo:task-toggle' task.id %}">
        {% csrf_token %}
        <input type="checkbox" name="complete" onchange="this.form.submit()" {% if task.complete %}checked{% endif %}>
    </form>
    <h6><a href="{% url 'todo:task-update' task.id %}">edit</a></h6>
    <h6><a href="{% url 'todo:task-delete' task.id %}">delete</a></h6>



</div>
{% endfor %}

{% else %}
<p>not any task</p>
{% endif %}

{% endblock %}